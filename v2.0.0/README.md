# BYU Pathway Missionary Question Analysis Dashboard v2.0.0

A professional Streamlit dashboard for analyzing student questions and discovering topics through interactive visualizations and filtering.

## Features

### Core Capabilities
- Real-time KPIs: Total questions, matched topics, new discoveries, geographic reach
- Advanced filtering: Classification, date range, country, similarity score, text search
- Interactive visualizations: Distribution charts, geographic insights, temporal patterns
- Topic exploration: Browse and analyze newly discovered topics
- Data export: Download filtered results as CSV

### Dashboard Pages
1. **Home**: Overview with key metrics and quick statistics
2. **Questions Table**: Interactive data table with advanced filtering and search
3. **Trends & Analytics**: Visual analysis with charts and insights
4. **New Topics**: Explore and review newly discovered topics from clustering

## Architecture

```
v2.0.0/
├── app.py                      # Main application entry point
├── config.py                   # Configuration and constants
├── requirements.txt            # Python dependencies
├── pages/                      # Streamlit pages
│   ├── Questions_Table.py
│   ├── Trends_and_Analytics.py
│   └── New_Topics.py
└── utils/                      # Utility modules
    ├── data_loader.py          # S3 data loading and processing
    └── visualizations.py       # Chart generation functions
```

## Quick Start

### Prerequisites
- Python 3.9 or higher
- AWS credentials configured
- Data files uploaded to S3 by the Jupyter notebook

### Installation

1. Install dependencies:
```bash
cd v2.0.0
pip install -r requirements.txt
```

2. Configure environment variables:

Create a `.env` file in the project root with:
```
AWS_ACCESS_KEY_ID=your_key_here
AWS_SECRET_ACCESS_KEY=your_secret_here
AWS_S3_BUCKET=byupathway-public
AWS_S3_PREFIX=topic-modeling-data
```

3. Run the dashboard:
```bash
streamlit run app.py
```

4. Access at `http://localhost:8501`

## Data Requirements

The dashboard loads the following files from S3 (generated by the Jupyter notebook):

- `similar_questions_*.parquet` - Questions matched to existing topics
- `new_topics_*.parquet` - Newly discovered topics from clustering
- `pathway_questions_review_*.parquet` - Complete question review dataset
- `topic_distribution_*.parquet` - Topic distribution statistics

The system automatically loads the most recent version of each file.

## Configuration

### Cache Settings
Adjust cache TTL in `config.py`:
```python
CACHE_TTL = 3600  # seconds (default: 1 hour)
```

### Display Columns
Customize visible columns in `config.py`:
```python
DEFAULT_VISIBLE_COLUMNS = [
    "input",
    "timestamp",
    "country",
    "state"
]
```

### Brand Colors
Modify colors in `config.py`:
```python
BYU_COLORS = {
    "primary": "#002E5D",    # BYU Navy
    "secondary": "#FFB933",  # BYU Gold
}
```

## Performance

- **Caching**: Data loaded once per hour (configurable TTL)
- **In-memory operations**: All filtering and sorting performed in pandas
- **Efficient formats**: Parquet files for fast loading
- **Session state**: Shared data across pages without reloading

## Troubleshooting

### No Data Appears
- Verify AWS credentials in `.env` file
- Confirm S3 bucket name and prefix
- Ensure Jupyter notebook has uploaded files
- Check browser console for errors

### Slow Performance
- Increase cache TTL in `config.py`
- Check network connection to S3
- Monitor system memory usage

### Missing Columns
- Verify column names in S3 parquet files
- Check `COLUMN_DISPLAY_NAMES` mapping in `config.py`
- Ensure notebook outputs all required columns

## Version History

### v2.0.0 (Current)
- Complete rewrite with modular architecture
- All data processing moved to Jupyter notebook
- Dashboard focused on visualization and analysis
- Advanced filtering with instant results
- Professional UI with BYU branding
- Performance optimized with caching

### v1.0.0 (Archived)
- Original version with embedded processing
- Configuration UI for settings
- Monolithic structure

## License

See LICENSE file in repository root.

## Acknowledgments

Built for BYU Pathway Worldwide using:
- OpenAI for embeddings and topic generation
- AWS S3 for data storage
- Streamlit for the dashboard framework

